{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "The AWS CloudFormation template for this Serverless application",
  "Resources": {
    "ServerlessDeploymentBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
              }
            }
          ]
        }
      }
    },
    "ServerlessDeploymentBucketPolicy": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "ServerlessDeploymentBucket"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "s3:*",
              "Effect": "Deny",
              "Principal": "*",
              "Resource": [
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      },
                      "/*"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      }
                    ]
                  ]
                }
              ],
              "Condition": {
                "Bool": {
                  "aws:SecureTransport": false
                }
              }
            }
          ]
        }
      }
    },
    "LoginLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-login"
      }
    },
    "RegisterLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-register"
      }
    },
    "RefreshTokenLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-refreshToken"
      }
    },
    "LogoutLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-logout"
      }
    },
    "GetUsersLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getUsers"
      }
    },
    "GetUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getUser"
      }
    },
    "CreateUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-createUser"
      }
    },
    "UpdateUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-updateUser"
      }
    },
    "DeleteUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-deleteUser"
      }
    },
    "GetArticlesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getArticles"
      }
    },
    "GetArticleByIdLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getArticleById"
      }
    },
    "GetArticleBySlugLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getArticleBySlug"
      }
    },
    "GetArticleSharePreviewLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getArticleSharePreview"
      }
    },
    "CreateArticleLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-createArticle"
      }
    },
    "UpdateArticleLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-updateArticle"
      }
    },
    "DeleteArticleLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-deleteArticle"
      }
    },
    "UpdateArticleStatusLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-updateArticleStatus"
      }
    },
    "UpdateFeaturedStatusLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-updateFeaturedStatus"
      }
    },
    "GetCategoriesLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getCategories"
      }
    },
    "CreateCategoryLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-createCategory"
      }
    },
    "UpdateCategoryLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-updateCategory"
      }
    },
    "DeleteCategoryLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-deleteCategory"
      }
    },
    "GetPendingCommentsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getPendingComments"
      }
    },
    "PostCommentLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-postComment"
      }
    },
    "UpdateCommentStatusLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-updateCommentStatus"
      }
    },
    "GetNotificationsForUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getNotificationsForUser"
      }
    },
    "GetAllTagsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getAllTags"
      }
    },
    "GetSubscribersLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getSubscribers"
      }
    },
    "SubscribeLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-subscribe"
      }
    },
    "ContactLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-contact"
      }
    },
    "GetUploadUrlLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/vadali-media-backend-dev-getUploadUrl"
      }
    },
    "IamRoleLambdaExecution": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "lambda.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Policies": [
          {
            "PolicyName": {
              "Fn::Join": [
                "-",
                [
                  "vadali-media-backend",
                  "dev",
                  "lambda"
                ]
              ]
            },
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogStream",
                    "logs:CreateLogGroup",
                    "logs:TagResource"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/vadali-media-backend-dev*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:PutLogEvents"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/vadali-media-backend-dev*:*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "dynamodb:GetItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:Scan",
                    "dynamodb:Query"
                  ],
                  "Resource": [
                    "arn:aws:dynamodb:us-east-1:*:table/vadali-media-articles-dev",
                    "arn:aws:dynamodb:us-east-1:*:table/vadali-media-articles-dev/index/*",
                    "arn:aws:dynamodb:us-east-1:*:table/vadali-media-users-dev",
                    "arn:aws:dynamodb:us-east-1:*:table/vadali-media-users-dev/index/*",
                    "arn:aws:dynamodb:us-east-1:*:table/vadali-media-categories-dev",
                    "arn:aws:dynamodb:us-east-1:*:table/vadali-media-categories-dev/index/*"
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "s3:PutObject",
                    "s3:PutObjectAcl",
                    "s3:GetObject",
                    "s3:DeleteObject"
                  ],
                  "Resource": "arn:aws:s3:::vadaliarticles/*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "s3:ListBucket"
                  ],
                  "Resource": "arn:aws:s3:::vadaliarticles"
                }
              ]
            }
          }
        ],
        "Path": "/",
        "RoleName": {
          "Fn::Join": [
            "-",
            [
              "vadali-media-backend",
              "dev",
              {
                "Ref": "AWS::Region"
              },
              "lambdaRole"
            ]
          ]
        }
      }
    },
    "LoginLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.login",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-login",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "LoginLogGroup"
      ]
    },
    "RegisterLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.register",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-register",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RegisterLogGroup"
      ]
    },
    "RefreshTokenLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.refreshToken",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-refreshToken",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RefreshTokenLogGroup"
      ]
    },
    "LogoutLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.logout",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-logout",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "LogoutLogGroup"
      ]
    },
    "GetUsersLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getUsers",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getUsers",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetUsersLogGroup"
      ]
    },
    "GetUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getUser",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getUser",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetUserLogGroup"
      ]
    },
    "CreateUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.createUser",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-createUser",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateUserLogGroup"
      ]
    },
    "UpdateUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.updateUser",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-updateUser",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateUserLogGroup"
      ]
    },
    "DeleteUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.deleteUser",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-deleteUser",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "DeleteUserLogGroup"
      ]
    },
    "GetArticlesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getArticles",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getArticles",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetArticlesLogGroup"
      ]
    },
    "GetArticleByIdLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getArticleById",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getArticleById",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetArticleByIdLogGroup"
      ]
    },
    "GetArticleBySlugLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getArticleBySlug",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getArticleBySlug",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetArticleBySlugLogGroup"
      ]
    },
    "GetArticleSharePreviewLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getArticleSharePreview",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getArticleSharePreview",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetArticleSharePreviewLogGroup"
      ]
    },
    "CreateArticleLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.createArticle",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-createArticle",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateArticleLogGroup"
      ]
    },
    "UpdateArticleLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.updateArticle",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-updateArticle",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateArticleLogGroup"
      ]
    },
    "DeleteArticleLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.deleteArticle",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-deleteArticle",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "DeleteArticleLogGroup"
      ]
    },
    "UpdateArticleStatusLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.updateArticleStatus",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-updateArticleStatus",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateArticleStatusLogGroup"
      ]
    },
    "UpdateFeaturedStatusLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.updateFeaturedStatus",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-updateFeaturedStatus",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateFeaturedStatusLogGroup"
      ]
    },
    "GetCategoriesLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getCategories",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getCategories",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetCategoriesLogGroup"
      ]
    },
    "CreateCategoryLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.createCategory",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-createCategory",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateCategoryLogGroup"
      ]
    },
    "UpdateCategoryLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.updateCategory",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-updateCategory",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateCategoryLogGroup"
      ]
    },
    "DeleteCategoryLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.deleteCategory",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-deleteCategory",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "DeleteCategoryLogGroup"
      ]
    },
    "GetPendingCommentsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getPendingComments",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getPendingComments",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetPendingCommentsLogGroup"
      ]
    },
    "PostCommentLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.postComment",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-postComment",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "PostCommentLogGroup"
      ]
    },
    "UpdateCommentStatusLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.updateCommentStatus",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-updateCommentStatus",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateCommentStatusLogGroup"
      ]
    },
    "GetNotificationsForUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getNotificationsForUser",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getNotificationsForUser",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetNotificationsForUserLogGroup"
      ]
    },
    "GetAllTagsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getAllTags",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getAllTags",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetAllTagsLogGroup"
      ]
    },
    "GetSubscribersLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getSubscribers",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getSubscribers",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetSubscribersLogGroup"
      ]
    },
    "SubscribeLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.subscribe",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-subscribe",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "SubscribeLogGroup"
      ]
    },
    "ContactLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.contact",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-contact",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ContactLogGroup"
      ]
    },
    "GetUploadUrlLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/vadali-media-backend/dev/1764793833455-2025-12-03T20:30:33.455Z/vadali-media-backend.zip"
        },
        "Handler": "src/handlers.getUploadUrl",
        "Runtime": "nodejs20.x",
        "FunctionName": "vadali-media-backend-dev-getUploadUrl",
        "MemorySize": 1024,
        "Timeout": 6,
        "Environment": {
          "Variables": {
            "ARTICLES_TABLE": "vadali-media-articles-dev",
            "USERS_TABLE": "vadali-media-users-dev",
            "CATEGORIES_TABLE": "vadali-media-categories-dev",
            "S3_BUCKET_NAME": "vadaliarticles",
            "ALLOWED_ORIGIN": "http://localhost:3000",
            "SHARE_SITE_ORIGIN": "https://vadalimedia.lk",
            "JWT_EXPIRES_IN": "10h",
            "JWT_SECRET": "change-me-in-prod"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetUploadUrlLogGroup"
      ]
    },
    "LoginLambdaVersionRQkoDzg8Qf2E2Eax3eYNXDMtbGt2p0olPsOggOfH8": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "LoginLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "RegisterLambdaVersionEmrkFPrGQsaMpbNJH9vtjmjAYrIdhXlv4yMb6tgs": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RegisterLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "RefreshTokenLambdaVersionltrLXWZDZybyBY1XNe139w6B3JQA7GpFIWI4ApmcT3Y": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RefreshTokenLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "LogoutLambdaVersioncRzrO56CKg1YIELdnNCVot0T8D8npy6j7XWhJuI3IRc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "LogoutLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetUsersLambdaVersionQve51PJWH75iM7jF9i4h0msNmn5YXuYP9BtWWMuF4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetUsersLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetUserLambdaVersionNHlB4JN26xVwtKPM5kVNytqCmVGPMvCJ7TdcWzJgJJw": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetUserLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "CreateUserLambdaVersion13sVauGE22CTdIIbuymU5tFk2WUV6JFTguaQzcbPY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateUserLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "UpdateUserLambdaVersionJI461CTALrkSOQqlTHzaO6GzRx4Um2ZbDjkne2rHI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateUserLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "DeleteUserLambdaVersionBieomUHF56MAlhkr2pHshDMSTOedCsoEHXCLC3iDUdw": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "DeleteUserLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetArticlesLambdaVersionXEtYL6394xvx6Iojk1lcJmXq1VcjQTdIjMfRqbkriso": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetArticlesLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetArticleByIdLambdaVersionqctCkg3Tr676D4qeidsTDx8TSUOoNMSEkphi3VJwI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetArticleByIdLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetArticleBySlugLambdaVersionUj6ycd7XgMfLo2Qd84NkAjVzUGHxIKAFOxlu1QwhXo": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetArticleBySlugLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetArticleSharePreviewLambdaVersionM4lXsMEgH2uJ7kNWpIMF1Ftw60VxJphHcKTw5Iw0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetArticleSharePreviewLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "CreateArticleLambdaVersiondqMbxDL19RjeLhvXvd29mtjsAwT1O2VpAYzjzbbkvE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateArticleLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "UpdateArticleLambdaVersionLw699kzGt0zcqWDLHLt4bI5WgLW6KOrXaFwaDOjKs": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateArticleLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "DeleteArticleLambdaVersionOURWJuTFILVqrbd7l5ETSwPacsUiwTT893d7SpODw": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "DeleteArticleLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "UpdateArticleStatusLambdaVersionMHlln36oatqmNS1bV5S9llyJcahzeCb6O5K8HNVZE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateArticleStatusLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "UpdateFeaturedStatusLambdaVersionDU1Kk6RdKKS85BdYbuYXsyu1NF85cydYJcWp6qeGzg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateFeaturedStatusLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetCategoriesLambdaVersionQNzKXibVAIXaElAHPy5XLZHhd317c0FEr7nTLvwOxs0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetCategoriesLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "CreateCategoryLambdaVersionNBd2cCWVnzXfVa8I0U2CFuyBsED7wfcX2MVIuC42A": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateCategoryLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "UpdateCategoryLambdaVersion4g6hQpVlKt8R18nOTmKtW8YfjUVMso6cZdn24l5tw4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateCategoryLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "DeleteCategoryLambdaVersion9WIpvsgkNrLeojIpEbp7Q1DaijPdibxC7GbxQLBRc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "DeleteCategoryLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetPendingCommentsLambdaVersion9soqmhU6z5S1NFVbwjPl92HqYAbYCZuQ4XOul7pb8k": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetPendingCommentsLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "PostCommentLambdaVersionZFNYl8HWhypGvRhWhu9HABDufT78ohmzqGj3bdrjq4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "PostCommentLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "UpdateCommentStatusLambdaVersionpGxglOtGhbMImwBYsFv7IVchULp6e31psh2ggBlhI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateCommentStatusLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetNotificationsForUserLambdaVersionigH9pszN8Pr5atJH0MHV2UZudIs0ZuXekQqi2S7jU8": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetNotificationsForUserLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetAllTagsLambdaVersion0kcdcL9u9zGoaep2GEbZgPhs0f5jOf0lcbPsWbZc4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetAllTagsLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetSubscribersLambdaVersioniQOaTZvgDpYxNblgp5aSWcydZaGDNnaJYzkrZLlkr6A": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetSubscribersLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "SubscribeLambdaVersionNoJj6r4WbCiT8xFP4s5Rt7is1hakCHlgWerpDEPvM": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "SubscribeLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "ContactLambdaVersionyqJoHBf5xfFVH881s6k8nQMKNdw2Lw6i3klMUcG4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ContactLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "GetUploadUrlLambdaVersionpAeeQHj7M48uoOyJBT0CsvMZlHgYltLqrHpelqGI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetUploadUrlLambdaFunction"
        },
        "CodeSha256": "jio8J5QAV4BA/ZqMbafqLWLrVIM/cqMSxTjLFC1BwAo="
      }
    },
    "HttpApi": {
      "Type": "AWS::ApiGatewayV2::Api",
      "Properties": {
        "Name": "dev-vadali-media-backend",
        "ProtocolType": "HTTP",
        "CorsConfiguration": {
          "AllowCredentials": true,
          "AllowHeaders": [
            "Content-Type",
            "Authorization",
            "X-Amz-Date",
            "X-Api-Key",
            "X-Amz-Security-Token",
            "X-Amz-User-Agent"
          ],
          "AllowMethods": [
            "OPTIONS",
            "GET",
            "POST",
            "PUT",
            "DELETE",
            "PATCH"
          ],
          "AllowOrigins": [
            "http://localhost:3000",
            "https://vadali.netlify.app",
            "https://vadalimedia.lk",
            "https://www.vadalimedia.lk"
          ]
        }
      }
    },
    "HttpApiStage": {
      "Type": "AWS::ApiGatewayV2::Stage",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "StageName": "$default",
        "AutoDeploy": true,
        "DefaultRouteSettings": {
          "DetailedMetricsEnabled": false
        }
      }
    },
    "LoginLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "LoginLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationLogin": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "LoginLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthLogin": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/login",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationLogin"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationLogin"
    },
    "RegisterLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RegisterLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationRegister": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "RegisterLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthRegister": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/register",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationRegister"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationRegister"
    },
    "RefreshTokenLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RefreshTokenLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationRefreshToken": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "RefreshTokenLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthRefresh": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/refresh",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationRefreshToken"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationRefreshToken"
    },
    "LogoutLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "LogoutLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationLogout": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "LogoutLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthLogout": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/logout",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationLogout"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationLogout"
    },
    "GetUsersLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetUsersLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetUsers": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetUsersLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetUsers": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /users",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetUsers"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetUsers"
    },
    "GetUserLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetUser": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetUserLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetUsersIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /users/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetUser"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetUser"
    },
    "CreateUserLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateUser": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateUserLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostUsers": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /users",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateUser"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateUser"
    },
    "UpdateUserLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdateUser": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdateUserLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutUsersIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /users/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdateUser"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdateUser"
    },
    "DeleteUserLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "DeleteUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationDeleteUser": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "DeleteUserLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteDeleteUsersIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "DELETE /users/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationDeleteUser"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationDeleteUser"
    },
    "GetArticlesLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetArticlesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetArticles": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetArticlesLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetArticles": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /articles",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetArticles"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetArticles"
    },
    "GetArticleByIdLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetArticleByIdLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetArticleById": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetArticleByIdLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetArticlesIdIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /articles/id/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetArticleById"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetArticleById"
    },
    "GetArticleBySlugLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetArticleBySlugLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetArticleBySlug": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetArticleBySlugLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetArticlesSlugSlugVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /articles/slug/{slug}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetArticleBySlug"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetArticleBySlug"
    },
    "GetArticleSharePreviewLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetArticleSharePreviewLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetArticleSharePreview": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetArticleSharePreviewLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetShareArticleSlugVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /share/article/{slug}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetArticleSharePreview"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetArticleSharePreview"
    },
    "CreateArticleLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateArticleLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateArticle": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateArticleLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostArticles": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /articles",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateArticle"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateArticle"
    },
    "UpdateArticleLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateArticleLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdateArticle": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdateArticleLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutArticlesIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /articles/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdateArticle"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdateArticle"
    },
    "DeleteArticleLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "DeleteArticleLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationDeleteArticle": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "DeleteArticleLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteDeleteArticlesIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "DELETE /articles/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationDeleteArticle"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationDeleteArticle"
    },
    "UpdateArticleStatusLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateArticleStatusLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdateArticleStatus": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdateArticleStatusLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutArticlesIdVarStatus": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /articles/{id}/status",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdateArticleStatus"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdateArticleStatus"
    },
    "UpdateFeaturedStatusLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateFeaturedStatusLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdateFeaturedStatus": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdateFeaturedStatusLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostArticlesFeatured": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /articles/featured",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdateFeaturedStatus"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdateFeaturedStatus"
    },
    "GetCategoriesLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetCategoriesLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetCategories": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetCategoriesLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetCategories": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /categories",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetCategories"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetCategories"
    },
    "CreateCategoryLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateCategoryLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateCategory": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateCategoryLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostCategories": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /categories",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateCategory"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateCategory"
    },
    "UpdateCategoryLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateCategoryLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdateCategory": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdateCategoryLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutCategoriesIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /categories/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdateCategory"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdateCategory"
    },
    "DeleteCategoryLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "DeleteCategoryLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationDeleteCategory": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "DeleteCategoryLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteDeleteCategoriesIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "DELETE /categories/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationDeleteCategory"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationDeleteCategory"
    },
    "GetPendingCommentsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetPendingCommentsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetPendingComments": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetPendingCommentsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetCommentsPending": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /comments/pending",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetPendingComments"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetPendingComments"
    },
    "PostCommentLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "PostCommentLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationPostComment": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "PostCommentLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostArticlesIdVarComments": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /articles/{id}/comments",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationPostComment"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationPostComment"
    },
    "UpdateCommentStatusLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateCommentStatusLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdateCommentStatus": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdateCommentStatusLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutArticlesArticleidVarCommentsCommentidVarStatus": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /articles/{articleId}/comments/{commentId}/status",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdateCommentStatus"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdateCommentStatus"
    },
    "GetNotificationsForUserLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetNotificationsForUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetNotificationsForUser": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetNotificationsForUserLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetNotificationsUserUseridVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /notifications/user/{userId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetNotificationsForUser"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetNotificationsForUser"
    },
    "GetAllTagsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetAllTagsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetAllTags": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetAllTagsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetTags": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /tags",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetAllTags"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetAllTags"
    },
    "GetSubscribersLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetSubscribersLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetSubscribers": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetSubscribersLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetSubscribers": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /subscribers",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetSubscribers"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetSubscribers"
    },
    "SubscribeLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "SubscribeLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationSubscribe": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "SubscribeLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostSubscribe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /subscribe",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationSubscribe"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationSubscribe"
    },
    "ContactLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ContactLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationContact": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "ContactLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostContact": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /contact",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationContact"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationContact"
    },
    "GetUploadUrlLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetUploadUrlLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetUploadUrl": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetUploadUrlLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostUploadDashurl": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /upload-url",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetUploadUrl"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetUploadUrl"
    },
    "ArticlesTable": {
      "Type": "AWS::DynamoDB::Table",
      "Properties": {
        "TableName": "vadali-media-articles-dev",
        "AttributeDefinitions": [
          {
            "AttributeName": "id",
            "AttributeType": "S"
          },
          {
            "AttributeName": "slug",
            "AttributeType": "S"
          },
          {
            "AttributeName": "categoryId",
            "AttributeType": "S"
          },
          {
            "AttributeName": "status",
            "AttributeType": "S"
          },
          {
            "AttributeName": "publishedAt",
            "AttributeType": "S"
          },
          {
            "AttributeName": "createdAt",
            "AttributeType": "S"
          }
        ],
        "KeySchema": [
          {
            "AttributeName": "id",
            "KeyType": "HASH"
          }
        ],
        "GlobalSecondaryIndexes": [
          {
            "IndexName": "slug-index",
            "KeySchema": [
              {
                "AttributeName": "slug",
                "KeyType": "HASH"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          },
          {
            "IndexName": "category-index",
            "KeySchema": [
              {
                "AttributeName": "categoryId",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "createdAt",
                "KeyType": "RANGE"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          },
          {
            "IndexName": "createdAt-index",
            "KeySchema": [
              {
                "AttributeName": "status",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "createdAt",
                "KeyType": "RANGE"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          },
          {
            "IndexName": "publishedAt-index",
            "KeySchema": [
              {
                "AttributeName": "status",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "publishedAt",
                "KeyType": "RANGE"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          }
        ],
        "BillingMode": "PAY_PER_REQUEST"
      }
    },
    "UsersTable": {
      "Type": "AWS::DynamoDB::Table",
      "Properties": {
        "TableName": "vadali-media-users-dev",
        "AttributeDefinitions": [
          {
            "AttributeName": "id",
            "AttributeType": "S"
          },
          {
            "AttributeName": "email",
            "AttributeType": "S"
          }
        ],
        "KeySchema": [
          {
            "AttributeName": "id",
            "KeyType": "HASH"
          }
        ],
        "GlobalSecondaryIndexes": [
          {
            "IndexName": "email-index",
            "KeySchema": [
              {
                "AttributeName": "email",
                "KeyType": "HASH"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          }
        ],
        "BillingMode": "PAY_PER_REQUEST"
      }
    },
    "CategoriesTable": {
      "Type": "AWS::DynamoDB::Table",
      "Properties": {
        "TableName": "vadali-media-categories-dev",
        "AttributeDefinitions": [
          {
            "AttributeName": "id",
            "AttributeType": "S"
          }
        ],
        "KeySchema": [
          {
            "AttributeName": "id",
            "KeyType": "HASH"
          }
        ],
        "BillingMode": "PAY_PER_REQUEST"
      }
    }
  },
  "Outputs": {
    "ServerlessDeploymentBucketName": {
      "Value": {
        "Ref": "ServerlessDeploymentBucket"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-ServerlessDeploymentBucketName"
      }
    },
    "LoginLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "LoginLambdaVersionRQkoDzg8Qf2E2Eax3eYNXDMtbGt2p0olPsOggOfH8"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-LoginLambdaFunctionQualifiedArn"
      }
    },
    "RegisterLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RegisterLambdaVersionEmrkFPrGQsaMpbNJH9vtjmjAYrIdhXlv4yMb6tgs"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-RegisterLambdaFunctionQualifiedArn"
      }
    },
    "RefreshTokenLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RefreshTokenLambdaVersionltrLXWZDZybyBY1XNe139w6B3JQA7GpFIWI4ApmcT3Y"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-RefreshTokenLambdaFunctionQualifiedArn"
      }
    },
    "LogoutLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "LogoutLambdaVersioncRzrO56CKg1YIELdnNCVot0T8D8npy6j7XWhJuI3IRc"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-LogoutLambdaFunctionQualifiedArn"
      }
    },
    "GetUsersLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetUsersLambdaVersionQve51PJWH75iM7jF9i4h0msNmn5YXuYP9BtWWMuF4"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetUsersLambdaFunctionQualifiedArn"
      }
    },
    "GetUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetUserLambdaVersionNHlB4JN26xVwtKPM5kVNytqCmVGPMvCJ7TdcWzJgJJw"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetUserLambdaFunctionQualifiedArn"
      }
    },
    "CreateUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateUserLambdaVersion13sVauGE22CTdIIbuymU5tFk2WUV6JFTguaQzcbPY"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-CreateUserLambdaFunctionQualifiedArn"
      }
    },
    "UpdateUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateUserLambdaVersionJI461CTALrkSOQqlTHzaO6GzRx4Um2ZbDjkne2rHI"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-UpdateUserLambdaFunctionQualifiedArn"
      }
    },
    "DeleteUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "DeleteUserLambdaVersionBieomUHF56MAlhkr2pHshDMSTOedCsoEHXCLC3iDUdw"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-DeleteUserLambdaFunctionQualifiedArn"
      }
    },
    "GetArticlesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetArticlesLambdaVersionXEtYL6394xvx6Iojk1lcJmXq1VcjQTdIjMfRqbkriso"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetArticlesLambdaFunctionQualifiedArn"
      }
    },
    "GetArticleByIdLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetArticleByIdLambdaVersionqctCkg3Tr676D4qeidsTDx8TSUOoNMSEkphi3VJwI"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetArticleByIdLambdaFunctionQualifiedArn"
      }
    },
    "GetArticleBySlugLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetArticleBySlugLambdaVersionUj6ycd7XgMfLo2Qd84NkAjVzUGHxIKAFOxlu1QwhXo"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetArticleBySlugLambdaFunctionQualifiedArn"
      }
    },
    "GetArticleSharePreviewLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetArticleSharePreviewLambdaVersionM4lXsMEgH2uJ7kNWpIMF1Ftw60VxJphHcKTw5Iw0"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetArticleSharePreviewLambdaFunctionQualifiedArn"
      }
    },
    "CreateArticleLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateArticleLambdaVersiondqMbxDL19RjeLhvXvd29mtjsAwT1O2VpAYzjzbbkvE"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-CreateArticleLambdaFunctionQualifiedArn"
      }
    },
    "UpdateArticleLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateArticleLambdaVersionLw699kzGt0zcqWDLHLt4bI5WgLW6KOrXaFwaDOjKs"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-UpdateArticleLambdaFunctionQualifiedArn"
      }
    },
    "DeleteArticleLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "DeleteArticleLambdaVersionOURWJuTFILVqrbd7l5ETSwPacsUiwTT893d7SpODw"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-DeleteArticleLambdaFunctionQualifiedArn"
      }
    },
    "UpdateArticleStatusLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateArticleStatusLambdaVersionMHlln36oatqmNS1bV5S9llyJcahzeCb6O5K8HNVZE"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-UpdateArticleStatusLambdaFunctionQualifiedArn"
      }
    },
    "UpdateFeaturedStatusLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateFeaturedStatusLambdaVersionDU1Kk6RdKKS85BdYbuYXsyu1NF85cydYJcWp6qeGzg"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-UpdateFeaturedStatusLambdaFunctionQualifiedArn"
      }
    },
    "GetCategoriesLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetCategoriesLambdaVersionQNzKXibVAIXaElAHPy5XLZHhd317c0FEr7nTLvwOxs0"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetCategoriesLambdaFunctionQualifiedArn"
      }
    },
    "CreateCategoryLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateCategoryLambdaVersionNBd2cCWVnzXfVa8I0U2CFuyBsED7wfcX2MVIuC42A"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-CreateCategoryLambdaFunctionQualifiedArn"
      }
    },
    "UpdateCategoryLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateCategoryLambdaVersion4g6hQpVlKt8R18nOTmKtW8YfjUVMso6cZdn24l5tw4"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-UpdateCategoryLambdaFunctionQualifiedArn"
      }
    },
    "DeleteCategoryLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "DeleteCategoryLambdaVersion9WIpvsgkNrLeojIpEbp7Q1DaijPdibxC7GbxQLBRc"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-DeleteCategoryLambdaFunctionQualifiedArn"
      }
    },
    "GetPendingCommentsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetPendingCommentsLambdaVersion9soqmhU6z5S1NFVbwjPl92HqYAbYCZuQ4XOul7pb8k"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetPendingCommentsLambdaFunctionQualifiedArn"
      }
    },
    "PostCommentLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "PostCommentLambdaVersionZFNYl8HWhypGvRhWhu9HABDufT78ohmzqGj3bdrjq4"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-PostCommentLambdaFunctionQualifiedArn"
      }
    },
    "UpdateCommentStatusLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateCommentStatusLambdaVersionpGxglOtGhbMImwBYsFv7IVchULp6e31psh2ggBlhI"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-UpdateCommentStatusLambdaFunctionQualifiedArn"
      }
    },
    "GetNotificationsForUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetNotificationsForUserLambdaVersionigH9pszN8Pr5atJH0MHV2UZudIs0ZuXekQqi2S7jU8"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetNotificationsForUserLambdaFunctionQualifiedArn"
      }
    },
    "GetAllTagsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetAllTagsLambdaVersion0kcdcL9u9zGoaep2GEbZgPhs0f5jOf0lcbPsWbZc4"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetAllTagsLambdaFunctionQualifiedArn"
      }
    },
    "GetSubscribersLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetSubscribersLambdaVersioniQOaTZvgDpYxNblgp5aSWcydZaGDNnaJYzkrZLlkr6A"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetSubscribersLambdaFunctionQualifiedArn"
      }
    },
    "SubscribeLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "SubscribeLambdaVersionNoJj6r4WbCiT8xFP4s5Rt7is1hakCHlgWerpDEPvM"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-SubscribeLambdaFunctionQualifiedArn"
      }
    },
    "ContactLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ContactLambdaVersionyqJoHBf5xfFVH881s6k8nQMKNdw2Lw6i3klMUcG4"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-ContactLambdaFunctionQualifiedArn"
      }
    },
    "GetUploadUrlLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetUploadUrlLambdaVersionpAeeQHj7M48uoOyJBT0CsvMZlHgYltLqrHpelqGI"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-GetUploadUrlLambdaFunctionQualifiedArn"
      }
    },
    "HttpApiId": {
      "Description": "Id of the HTTP API",
      "Value": {
        "Ref": "HttpApi"
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-HttpApiId"
      }
    },
    "HttpApiUrl": {
      "Description": "URL of the HTTP API",
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "HttpApi"
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region"
            },
            ".",
            {
              "Ref": "AWS::URLSuffix"
            }
          ]
        ]
      },
      "Export": {
        "Name": "sls-vadali-media-backend-dev-HttpApiUrl"
      }
    }
  }
}